create database LineasMetro;

use LineasMetro;

create table lineas
(
	num_linea int not null auto_increment primary key,
	color char(10) not null,
	hora_primer_tren time not null,
	hora_ultimo_tren time not null
);

create table estaciones
(
	cod_estacion char(6) not null primary key,
	nombre char(30) not null,
	hora_apertura time not null,
	hora_cierre time not null
);

create table lineas_estaciones
(
	num_linea int not null,
	cod_estacion char(6) not null,
	orden int not null,
	primary key (num_linea, cod_estacion)
);

create table accesos
(
	cod_acceso char(4) not null primary key,
	cod_estacion char(6) not null,
	calle char(50) not null,
	num_portal char(4) not null
);

create table cocheras
(
	cod_cochera char(4) not null primary key,
	cod_estacion char(6) not null,
	num_maquinas int not null,
	num_vagones int not null	
);

create table trenes
(
	num_tren char(4) not null primary key,
	num_linea int,
	cod_cochera char(4) not null,
	fecha_compra date not null,
	modelo char (10) not null,
	num_vagones int not null
);

create table abonos
(
	nombre_abono char(10) not null primary key,
	duracion_dias int not null,
	precio float(8,2) not null,
	precio_estudiante float(8,2) not null,
	precio_jubilado float(8,2) not null
);

create table abonos_lineas
(
	nombre_abono char(10) not null,
	num_linea int not null,
	primary key (nombre_abono, num_linea)
);


insert into lineas (color, hora_primer_tren, hora_ultimo_tren) values
('azul', '06:05:00', '02:00:00'),
('rojo', '06:05:00', '02:00:00'),
('amarillo', '06:05:00', '02:00:00'),
('marron', '07:00:00', '01:00:00'),
('verde', '07:00:00', '01:00:00');

insert into estaciones values
('ES1001', 'Pinar de Chamartin', '06:05:00', '02:00:00'), 
('ES1002', 'Bambu', '06:05:00', '02:00:00'),				
('ES1003', 'Chamartin', '06:05:00', '02:00:00'),			
('ES1004', 'Plaza de Castilla', '06:05:00', '02:00:00'),
('ES1005', 'Cuatro Caminos', '06:05:00', '02:00:00'),	
('ES1006', 'Iglesia', '06:05:00', '02:00:00'), 			
('ES1007', 'Bilbao', '06:05:00', '02:00:00'),			
('ES1008', 'Gran Via', '06:05:00', '02:00:00'),			
('ES1009', 'Sol', '06:05:00', '02:00:00'),				
('ES1010', 'Atocha', '06:05:00', '02:00:00'),			
('ES1011', 'Menendez Pelayo', '06:05:00', '02:00:00'),	
('ES1012', 'Ventas', '06:05:00', '02:00:00'),			
('ES1013', 'Goya', '06:05:00', '02:00:00'),				
('ES1014', 'Principe de Vergara', '06:05:00', '02:00:00'),	
('ES1015', 'Retiro', '06:05:00', '02:00:00'),			
('ES1016', 'Banco de España', '06:05:00', '02:00:00'),	
('ES1017', 'Opera', '06:05:00', '02:00:00'),			
('ES1018', 'Noviciado', '06:05:00', '02:00:00'),			
('ES1019', 'Quevedo', '06:05:00', '02:00:00'),			
('ES1020', 'Canal', '06:05:00', '02:00:00'),			
('ES1021', 'Legazpi', '06:05:00', '02:00:00'),			
('ES1022', 'Delicias', '06:05:00', '02:00:00'),			
('ES1023', 'Embajadores', '06:05:00', '02:00:00'),		
('ES1024', 'Lavapies', '06:05:00', '02:00:00'),			
('ES1025', 'Callao', '06:05:00', '02:00:00'),			
('ES1026', 'Plaza de España', '06:05:00', '02:00:00'),	
('ES1027', 'Moncloa', '06:05:00', '02:00:00'),			
('ES1028', 'Alonso Martinez', '07:00:00', '01:00:00'),	
('ES1029', 'Colon', '07:00:00', '01:00:00'),				
('ES1030', 'Serrano', '07:00:00', '01:00:00'),			
('ES1031', 'Diego de Leon', '07:00:00', '01:00:00'),	
('ES1032', 'San Lorenzo', '07:00:00', '01:00:00'),		
('ES1033', 'Hortaleza', '07:00:00', '01:00:00'),
('ES1034', 'Suanzes', '07:00:00', '01:00:00'), 
('ES1035', 'El Carmen', '07:00:00', '01:00:00'),		
('ES1036', 'Nuñez de Balboa', '07:00:00', '01:00:00'), 
('ES1037', 'Ruben Dario', '07:00:00', '01:00:00'), 
('ES1038', 'La Latina', '07:00:00', '01:00:00'), 
('ES1039', 'Piramides', '07:00:00', '01:00:00'), 
('ES1040', 'Carabanchel', '07:00:00', '01:00:00');			


insert into lineas_estaciones values
(1, 'ES1001', 1),
(1, 'ES1002', 2),
(1, 'ES1003', 3),
(1, 'ES1004', 4),
(1, 'ES1005', 5),
(1, 'ES1006', 6),
(1, 'ES1007', 7),
(1, 'ES1008', 8),
(1, 'ES1009', 9),
(1, 'ES1010', 10),
(1, 'ES1011', 11),

(2, 'ES1012', 1),
(2, 'ES1013', 2),
(2, 'ES1014', 3),
(2, 'ES1015', 4),
(2, 'ES1016', 5),
(2, 'ES1009', 6),
(2, 'ES1017', 7),
(2, 'ES1018', 8),
(2, 'ES1019', 9),
(2, 'ES1020', 10),
(2, 'ES1005', 11),

(3, 'ES1021', 1),
(3, 'ES1022', 2),
(3, 'ES1023', 3),
(3, 'ES1024', 4),
(3, 'ES1009', 5),
(3, 'ES1025', 6),
(3, 'ES1026', 7),
(3, 'ES1027', 8),
(3, 'ES1019', 9),

(4, 'ES1007', 1),
(4, 'ES1028', 2),
(4, 'ES1029', 3),
(4, 'ES1030', 4),
(4, 'ES1013', 5),
(4, 'ES1031', 6),
(4, 'ES1032', 7),
(4, 'ES1033', 8),

(5, 'ES1034', 1),
(5, 'ES1035', 2),
(5, 'ES1012', 3),
(5, 'ES1031', 4),
(5, 'ES1036', 5),
(5, 'ES1037', 6),
(5, 'ES1028', 7),
(5, 'ES1008', 8),
(5, 'ES1025', 9),
(5, 'ES1017', 10),
(5, 'ES1038', 11),
(5, 'ES1039', 12),
(5, 'ES1040', 13);

insert into abonos values
('Mensual_A', 30, 54.60, 20, 12.30),
('Mensual_B', 30, 63.70, 20, 12.30),
('Mensual_C', 30, 72, 20, 12.30),
('Anual_A', 365, 546, 200, 123),
('Anual_B', 365, 637, 200, 123),
('Anual_C', 365, 720, 200, 123),
('Turista_1', 1, 8.40, 8.40, 8.40),
('Turista_2', 2, 14.20, 14.20, 14.20),
('Turista_3', 3, 18.40, 18.40, 18.40),
('Turista_5', 5, 26.80, 26.80, 26.80),
('Turista_7', 7, 35.40, 35.40, 35.40);

insert into abonos_lineas values
('Mensual_A', 1),
('Mensual_A', 2),
('Mensual_A', 3),
('Mensual_B', 1),
('Mensual_B', 2),
('Mensual_B', 3),
('Mensual_B', 4),
('Mensual_C', 1),
('Mensual_C', 2),
('Mensual_C', 3),
('Mensual_C', 4),
('Mensual_C', 5),
('Anual_A', 1),
('Anual_A', 2),
('Anual_A', 3),
('Anual_B', 1),
('Anual_B', 2),
('Anual_B', 3),
('Anual_B', 4),
('Anual_C', 1),
('Anual_C', 2),
('Anual_C', 3),
('Anual_C', 4),
('Anual_C', 5),
('Turista_1', 1),
('Turista_1', 2),
('Turista_1', 3),
('Turista_2', 1),
('Turista_2', 2),
('Turista_2', 3),
('Turista_3', 1),
('Turista_3', 2),
('Turista_3', 3),
('Turista_5', 1),
('Turista_5', 2),
('Turista_5', 3),
('Turista_5', 4),
('Turista_5', 5),
('Turista_7', 1),
('Turista_7', 2),
('Turista_7', 3),
('Turista_7', 4),
('Turista_7', 5);


insert into accesos values
('A000', 'ES1001', 'Arturo Soria', '330'),
('A001', 'ES1002', 'Bambu', '14'),
('A002', 'ES1003', 'Agustin de Foxa', '1'),
('A003', 'ES1003', 'Vestibulo Cercacnias', '1'),
('A004', 'ES1004', 'Paseo de la Castellana', '189'),
('A005', 'ES1004', 'Bravo Murillo', '377'),
('A006', 'ES1004', 'Plaza de Castilla', '1'),
('A007', 'ES1005', 'Reina Victoria', '2'),
('A008', 'ES1005', 'Bravo Murillo', '101'),
('A009', 'ES1006', 'General Martinez Campos', '1'),
('A010', 'ES1006', 'Santa Engracia', '58'),
('A011', 'ES1006', 'Eloy Gonzalo', '38'),
('A012', 'ES1007', 'Gta. Bilbao', '5'),
('A013', 'ES1007', 'Luchana', '22'),
('A014', 'ES1008', 'Gran Via', '25'),
('A015', 'ES1008', 'Montera', '44'),
('A016', 'ES1009', 'Pta. del Sol', '7'),
('A017', 'ES1009', 'Preciados', '3'),
('A018', 'ES1010', 'Gta. Carlos V', '11'),
('A019', 'ES1011', 'Menendez Pelayo', '137'),
('A020', 'ES1011', 'Gutenberg', '4'),
('A021', 'ES1012', 'Alcala', '233'),
('A022', 'ES1013', 'Conde de Peñalver', '2'),
('A023', 'ES1013', 'Goya', '89'),
('A024', 'ES1013', 'Goya', '62'),
('A025', 'ES1013', 'General Diaz Porlier', '3'),
('A026', 'ES1014', 'Alcala', '123'),
('A027', 'ES1015', 'Lagasca', '4'),
('A028', 'ES1015', 'Alcala', '75'),
('A029', 'ES1016', 'Alcala', '51'),
('A030', 'ES1016', 'Alcala', '47'),
('A031', 'ES1017', 'Plaza de Isabel II', '1'),
('A032', 'ES1018', 'San Bernardo', '45'),
('A033', 'ES1018', 'San Bernardo', '51'),
('A034', 'ES1019', 'Gta. Quevedo', '2'),
('A035', 'ES1020', 'Bravo Murillo', '40'),
('A036', 'ES1021', 'Plaza de Legazpi', '1'),
('A037', 'ES1021', 'Paseo de las Delicias', '132'),
('A038', 'ES1022', 'Paseo de las Delicias', '60'),
('A039', 'ES1022', 'Paseo de las Delicias', '78'),
('A040', 'ES1023', 'Gta. Embajadores', '7'),
('A041', 'ES1024', 'Argumosa', '1'),
('A042', 'ES1025', 'Jacometrezo', '1'),
('A043', 'ES1025', 'Plaza de Callao', '1'),
('A044', 'ES1025', 'Gran Via', '39'),
('A045', 'ES1026', 'Gran Via', '73'),
('A046', 'ES1026', 'Princesa', '1'),
('A047', 'ES1026', 'Plaza de España', '18'),
('A048', 'ES1026', 'Plaza Conde de Toreno', '1'),
('A049', 'ES1027', 'Arcipreste de Hita', '1'),
('A050', 'ES1027', 'Princesa', '96'),
('A051', 'ES1028', 'Plaza Santa Barbara', '5'),
('A052', 'ES1028', 'Genova', '2'),
('A053', 'ES1029', 'Genova', '29'),
('A054', 'ES1030', 'Goya', '15'),
('A055', 'ES1030', 'Goya', '23'),
('A056', 'ES1031', 'Diego de Leon', '69'),
('A057', 'ES1031', 'Francisco Silvela', '56'),
('A058', 'ES1031', 'Francisco Silvela', '47'),
('A059', 'ES1032', 'Avda. Barranquilla', '11'),
('A060', 'ES1033', 'Capitan Cortes', '4'),
('A061', 'ES1033', 'Costa del Sol', '20'),
('A062', 'ES1034', 'Alcala', '527'),
('A063', 'ES1035', 'Alcala', '258'),
('A064', 'ES1035', 'Alcalde López Casero', '2'),
('A065', 'ES1036', 'Velazquez', '92'),
('A066', 'ES1036', 'Nuñez de Balboa', '85'),
('A067', 'ES1036', 'Plaza Marques de Salamanca', '10'),
('A068', 'ES1037', 'Ruben Dario', '2'),
('A069', 'ES1037', 'Paseo de la Castellana', '39'),
('A070', 'ES1038', 'Toledo', '56'),
('A071', 'ES1039', 'Paseo de las Acacias', '50'),
('A072', 'ES1040', 'Gta. del Ejército', '1');

insert into cocheras values
('C01', 'ES1001', 50, 300),
('C02', 'ES1001', 20, 120),
('C03', 'ES1005', 20, 120),
('C04', 'ES1011', 35, 210),
('C05', 'ES1012', 15, 90),
('C06', 'ES1019', 15, 90),
('C07', 'ES1021', 50, 300),
('C08', 'ES1021', 30, 180),
('C09', 'ES1033', 40, 240),
('C10', 'ES1040', 70, 420);

insert into trenes values
('100', 1, 'C01', '1994-02-01', 'T2000', 4),
('101', 1, 'C01', '1994-02-01', 'T2000', 4),
('102', 1, 'C01', '1996-02-15', 'T2000', 4),
('103', 1, 'C01', '1996-02-15', 'T2000', 4),
('104', 1, 'C01', '2006-02-04', 'T3000', 4),
('105', 1, 'C01', '2006-02-04', 'T3000', 4),
('106', 1, 'C01', '2006-02-04', 'T3000', 4),
('107', 1, 'C02', '2006-02-04', 'T3000', 4),
('108', 1, 'C02', '2006-02-04', 'T3000', 4),
('109', 1, 'C03', '2006-02-04', 'T3000', 4),
('110', 1, 'C03', '2006-02-04', 'T3000', 4),
('111', 1, 'C04', '2014-02-01', 'T9000', 6),
('112', 1, 'C04', '2014-02-01', 'T9000', 6),
('113', 2, 'C05', '1992-02-01', 'T5000', 6),
('114', 2, 'C05', '1994-02-01', 'T2000', 4),
('115', 2, 'C05', '2002-02-20', 'T7000', 6),
('116', 2, 'C05', '2002-02-20', 'T7000', 6),
('117', 2, 'C06', '2002-02-20', 'T7000', 6),
('118', 2, 'C06', '2002-02-20', 'T7000', 6),
('119', 2, 'C06', '2002-02-20', 'T7000', 6),
('120', 2, 'C06', '2002-02-20', 'T7000', 6),
('121', 2, 'C06', '2004-02-10', 'T7000', 6),
('122', 2, 'C06', '2004-02-10', 'T7000', 6),
('123', 3, 'C07', '2014-02-01', 'T9000', 6),
('124', 3, 'C07', '2014-02-01', 'T9000', 6),
('125', 3, 'C07', '2014-02-01', 'T9000', 6),
('126', 3, 'C07', '2014-02-01', 'T9000', 6),
('127', 3, 'C07', '2014-02-01', 'T9000', 6),
('128', 3, 'C07', '2014-02-01', 'T9000', 6),
('129', 3, 'C07', '2014-02-01', 'T9000', 6),
('130', 3, 'C07', '2014-02-01', 'T9000', 6),
('131', 4, 'C09', '1992-02-01', 'T5000', 6),
('132', 4, 'C09', '1996-02-15', 'T5000', 6),
('133', 4, 'C09', '1996-02-15', 'T5000', 6),
('134', 4, 'C09', '1998-02-13', 'T5000', 6),
('135', 4, 'C09', '2002-02-20', 'T7000', 6),
('136', 4, 'C09', '2002-02-20', 'T7000', 6),
('137', 4, 'C10', '2002-02-20', 'T8000', 4),
('138', 4, 'C10', '2002-02-20', 'T8000', 4),
('139', 5, 'C10', '2002-02-20', 'T7000', 6),
('140', 5, 'C10', '2002-02-20', 'T7000', 6),
('141', 5, 'C10', '2002-02-20', 'T8000', 4),
('142', 5, 'C10', '2002-02-20', 'T8000', 4),
('143', 5, 'C10', '2006-02-04', 'T3000', 4),
('144', 5, 'C10', '2006-02-04', 'T3000', 4),
('145', 5, 'C10', '2008-02-01', 'T3000', 4),
('146', 5, 'C10', '2008-02-01', 'T3000', 4),
('147', 5, 'C10', '2008-02-01', 'T3000', 4),
('148', 5, 'C10', '2008-02-01', 'T3000', 4),
('149', 5, 'C10', '2008-02-01', 'T3000', 4),
('150', 5, 'C10', '2008-02-01', 'T3000', 4),
('151', 5, 'C10', '2014-02-01', 'T9000', 6),
('152', 5, 'C10', '2014-02-01', 'T9000', 6),
('153', 5, 'C10', '2014-02-01', 'T9000', 6), 
('154', null, 'C01', '2006-02-01', 'T3000', 4),
('155', null, 'C10', '2006-02-01', 'T3000', 4);

